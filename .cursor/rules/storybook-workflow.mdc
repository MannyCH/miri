---
description: Two-phase workflow - Figma to Storybook, then Storybook to Web App
alwaysApply: true
---

# Storybook Development Workflow

## Complete Two-Phase Workflow

### Phase 1: Figma → Storybook (Component Library Creation)

**When:** Creating or documenting new components

**Process:**
1. **Get Figma Design** using Figma Console MCP:
   ```
   - Use: figma_execute, figma_capture_screenshot
   - Extract: Typography, colors, spacing, structure
   ```

2. **Write Code with Base UI + Design Tokens:**
   ```javascript
   // Match Figma design using:
   // - Base UI components (@base-ui/react)
   // - Design tokens: var(--color-*), var(--spacing-*)
   // - Typography classes: .text-h1-bold, .text-body-regular
   ```

3. **Document in Storybook:**
   ```
   - Create component stories (CSF3 format)
   - Show all variants and states
   - Document props and usage
   - Verify visual match with Figma
   ```

4. **Verify:**
   - Component matches Figma design exactly
   - All design tokens used (no hardcoded values)
   - Stories demonstrate all states
   - Accessible and well-documented

### Phase 2: Storybook → Web App (Application Development)

**When:** Building the actual web application

**Process:**
1. **Check Storybook First** - Always use Storybook MCP before implementing:
   ```
   - Use: list-all-documentation, get-documentation
   - Find: Existing components to reuse
   - Understand: Component APIs and props
   ```

2. **Build from Documented Components:**
   ```javascript
   // Import components documented in Storybook
   import { Button } from './components/Button';
   import { RecipeListItem } from './components/RecipeListItem';
   
   // Use them in your app
   // DO NOT create new versions or modify
   ```

3. **Compose Patterns:**
   ```
   - Patterns are compositions of Storybook components
   - Document patterns in Storybook too
   - Example: MealPlanningView uses CalendarWeek + RecipeListItem + NavigationBar
   ```

4. **Single Source of Truth:**
   ```
   Storybook = Component Library Reference
   Web App = Uses Storybook Components
   ```

## When to Use Each MCP Server

### Figma Console MCP (Phase 1 Only)

Use for **creating** Storybook components:
- `figma_execute` - Get component structure
- `figma_capture_screenshot` - Visual reference
- `figma_get_variables` - Design token bindings
- `figma_get_styles` - Typography styles

### Storybook MCP (Phase 2 Only)

Use for **building** web app:
- `get_ui_building_instructions` - Component guidelines
- `list-all-documentation` - Discover components
- `get-documentation` - Component API details
- `preview-stories` - View component stories

## Required: Storybook Must Be Running

The MCP server is only available when Storybook is running:

```bash
npm run storybook
```

The server runs at: `http://localhost:6006/mcp`

## Story Development Standards

When creating or modifying components:

1. Use CSF3 (Component Story Format 3) for stories
2. Create stories that demonstrate key component states
3. Link stories in component documentation
4. Ensure stories are accessible and well-documented
5. Use the MCP server to get story URLs for verification

## Key Principle

```
Figma (Design) → Base UI Code + Tokens → Storybook (Docs) → Web App (Implementation)
     ↑                                         ↑                    ↑
Phase 1: Component Creation          Phase 2: App Development
Uses: Figma MCP                      Uses: Storybook MCP
```

**Never skip Storybook documentation. It's the bridge between design and implementation.**
